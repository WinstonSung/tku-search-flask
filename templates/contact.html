{% include 'base.html' %}

{% block main_content %}
<div class="container py-4 fadein-effect">
    <!-- å‰è¨€ -->
    <div class="row justify-content-center align-items-center my-5" style="max-height: 32vh;">
        <div class="col-6 mx-4 rounded-ct shadow-sm" style="background: #ffffff80; min-height: 24vh; max-height: 28vh; display: flex; align-items: top; overflow: scroll;">
            <div class="mx-5 my-4">
                <h6 style="font-size: 1.1em;" class="py-2 text-dark">å„ä½åŒå­¸å¤§å®¶å¥½ï¼š</h6>
                <p style="font-size: 0.95em; line-height: 1.6em; color: #383838;">å¦‚æœæ‚¨æœ‰ç™¼ç¾åˆ°ç¶²ç«™å…§çš„æ¼æ´ğŸã€æ“ä½œä¸æµæš¢çš„é«”é©—ï¼Œäº¦æˆ–æ˜¯æƒ³çµ¦äºˆæˆ‘å€‘å»ºè­°ç­‰ç­‰ï¼Œéƒ½æ­¡è¿åˆ©ç”¨ä¸‹æ–¹è¡¨å–®æä¾›æ‚¨å¯¶è²´çš„æ„è¦‹âœï¸ï¼Œæˆ‘å€‘æœƒè™›å¿ƒæ¥å—åŠæª¢è¨æ”¹é€²ï¼Œä¸¦ä»¥æœ€å¿«é€Ÿåº¦å›ä¿¡ğŸ“ªçµ¦æ‚¨ï¼è¬è¬ ( Â´â–½ï½€)</p>
            </div>
        </div>
    </div>
    <!-- ä¿¡ç®± -->
    <div class="row justify-content-center align-items-center my-5" style="max-height: 32vh;">
        <div class="col-6 mx-4 py-5 justify-content-center rounded-ct shadow-sm" style="background: #ffffff80; max-height: 25vh; min-height: 24vh; display: flex; align-items: center;">
            <form autocomplete="off" id="form-email" class="my-3" style="width: 42vw;" method="get">
                <div class="form-floating mb-2 mx-4" style="color: #888888; font-size: 0.9em;">
                    <input type="text" id="name" class="form-control form-control-sm border-0 border-bottom bg-transparent" id="floatingName" placeholder="ä½ çš„åå­—:" style="border-radius: 0; padding-top: 2.8em;">
                    <label id="fname" style="color: #505050;" for="floatingName" style="bottom: 5px;">ä½ çš„åå­—:</label>
                </div>
                <div class="form-floating mb-3 mx-4" style="color: #888888; font-size: 0.9em;">
                    <input type="text" id="email" class="form-control form-control-sm border-0 border-bottom bg-transparent" id="floatingEmail" placeholder="éƒµä»¶åœ°å€:" style="border-radius: 0; padding-top: 2.8em;">
                    <label id="femail" style="color: #505050;" for="floatingEmail">éƒµä»¶åœ°å€:</label>
                </div>
            </form>
        </div>
    </div>
    <!-- è¡¨å–® -->
    <div class="row justify-content-center align-items-center my-5">
        <div class="col-6 mx-4 justify-content-center rounded-ct shadow-sm" style="background: #ffffff80; min-height: 22vh; display: flex; align-items: center;">
            <form autocomplete="off" id="form-recommend" class="my-3" style="width: 42vw;" method="get">
                <div class="form-floating mb-3 mx-4" style="color: #888888; font-size: 0.9em;">
                    <textarea type="text" id="msg" style="min-height: 10vw; padding-top: 2.4em; border-radius: 0;" class="form-control form-control-sm border-0 border-bottom bg-transparent" id="floatingRecommend" placeholder="å§“å"></textarea>
                    <label id="fmsg" style="color: #505050;" for="floatingRecommend">æƒ³èªªäº›ä»€éº¼å—ï¼Œæ‰“åœ¨é€™è£¡å§...</label>
                </div>
            </form>
        </div>
    </div>

    <div class="row justify-content-center align-items-center mx-3 my-5">
        <div class="col-3 form-group pt-4 " style="border-radius: 18px;">
            <input onclick="submitAll()" id="submit" name="submit" type="button" class="form-control btn btn-info btn-md shadow px-5 border-0 text-white" value="é€å‡ºè¡¨å–®" style="background: #72C2C6; border-radius: 2em; font-size: 0.9em; padding: 12px; width: 20vw;">
        </div>
    </div>
</div>
{% endblock %}

{% block javascript %}
<script>
    function validateEmail(email) {
        const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }
    function submitAll() {
        method = "post";

        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var msg = document.getElementById("msg").value;

        if (name == "" || email == "" || msg == "") {
            if (name == "") {
                document.getElementById("name").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-invalid border-danger");
                document.getElementById("fname").setAttribute("style", "color: #dc3545;");
            } else {
                document.getElementById("name").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-valid border-success");
                document.getElementById("fname").setAttribute("class", "text-success");
            }
            if (email == "") {
                document.getElementById("email").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-invalid border-danger");
                document.getElementById("femail").setAttribute("style", "color: #dc3545;");
            } else {
                document.getElementById("email").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-valid border-success");
                document.getElementById("femail").setAttribute("class", "text-success");
            }
            if (msg == "") {
                document.getElementById("msg").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-invalid border-danger");
                document.getElementById("fmsg").setAttribute("style", "color: #dc3545;");
            } else {
                document.getElementById("msg").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-valid border-success");
                document.getElementById("fmsg").setAttribute("class", "text-success");
            }
            alert("# è«‹ç¢ºå¯¦å¡«å¯«æ¯ä¸€æ ¼æ¬„ä½");
        } else {
            if (!(validateEmail(email))) {
                document.getElementById("email").setAttribute("class", "form-control form-control-sm border-0 border-bottom bg-transparent is-invalid border-danger");
                document.getElementById("femail").setAttribute("style", "color: #dc3545;");
                alert("# æ‚¨çš„ä¿¡ç®±æ ¼å¼æœ‰èª¤");
            } else {
                request = {'name':name, 'email':email, 'msg':msg};

                // å»ºç«‹ä¸€å€‹æ¨¡æ“¬è¡¨å–®ï¼Œé€å‡ºpost request
                var form = document.createElement("form");
                form.setAttribute("method", method);
                form.setAttribute("action", 'contact');

                for(var key in request) {
                    var hiddenField = document.createElement("input");
                    hiddenField.setAttribute("type", "hidden");
                    hiddenField.setAttribute("name", key);
                    hiddenField.setAttribute("value", request[key]);

                    form.appendChild(hiddenField);
                }
                document.body.appendChild(form);    // Not entirely sure if this is necessary
                form.submit();
            }
        }
    }

    function alertMsg(isComplete) {
        if (isComplete == true) {
            alert("# å‚³é€æˆåŠŸ");
        }
    }

    alertMsg({{sendComplete}});

</script>
{% endblock %}